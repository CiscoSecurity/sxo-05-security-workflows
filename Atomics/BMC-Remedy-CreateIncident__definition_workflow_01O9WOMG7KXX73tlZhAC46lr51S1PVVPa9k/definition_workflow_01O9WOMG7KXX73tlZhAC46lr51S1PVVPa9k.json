{
	"workflow": {
	  "unique_name": "definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k",
	  "name": "BMC Remedy - Create Incident",
	  "title": "BMC Remedy - Create Incident",
	  "type": "generic.workflow",
	  "base_type": "workflow",
	  "variables": [
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Operational Categorization Tier 2",
			"type": "datatype.string",
			"description": "Displayed under the Operational Categorization section on the interface and main forms",
			"is_required": false,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OOE08POULH95DiDs98N7hE6B7nP922nRZ",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Description",
			"type": "datatype.string",
			"description": "A brief description of the incident (this becomes the title of the incident)",
			"is_required": true,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OOCZV5OAINE6P9vTSpa8EQ9Ufm70q1yfF",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Assigned Group",
			"type": "datatype.string",
			"description": "Full name of the group to assign the incident to",
			"is_required": false,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OODD4G709R87lniNfjRFIPbrOh0zAnPxN",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Reported Source",
			"type": "datatype.string",
			"description": "Source of the incident report. Valid values include: Direct Input, Email, External Escalation, Fax, Self Service, Systems Management, Phone, Voice Mail, Walk In, Web, Other, BMC Impact Manager Event. Note: Your Remedy instance might be configured to use different values",
			"is_required": true,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OODACX5TEJR2BIGQJcVd38SmK7ap4EzD5",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "output",
			"name": "API Response",
			"type": "datatype.string",
			"description": "Response from the BMC Remedy API",
			"is_required": false,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01O9WOMFYW7CI3K1b2Hl4ESSPv1Un9x3xK5",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Impact",
			"type": "datatype.string",
			"description": "Level of impact to the customer. Remedy uses the values of \"Impact\" and \"Urgency\" to automatically set the priority of the incident. Valid values include:\n1 - Extensive/Widespread\n2 - Significant/Large\n3 - Moderate/Limited\n4 - Minor/Localized\nNote: Your Remedy instance might be configured to use different values",
			"is_required": true,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OQ9CZEZCIQM6wlVDJRweo9VLukJHeGDX5",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "v1",
			"scope": "input",
			"name": "API Version",
			"type": "datatype.string",
			"description": "Version of the BMC Remedy API to use",
			"is_required": true,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01O9WOMFYW2WG6ctZxBOROr2l3aofhHequB",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Operational Categorization Tier 3",
			"type": "datatype.string",
			"description": "Displayed under the Operational Categorization section on the interface and main forms",
			"is_required": false,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OOE1ULH0VTS0RMk4qDaBK9X8wZUdJ9kL1",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Custom First Name",
			"type": "datatype.string",
			"description": "The first name of the customer the incident is for",
			"is_required": true,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OFVG8HP4ZM26gpRjapNbsPe3XD5hmSNhD",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Last Name",
			"type": "datatype.string",
			"description": "The last name of the customer the incident is for",
			"is_required": true,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OFVGJGAKS035uCTQaideofo8FCRi2kwKt",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Operational Categorization Tier 1",
			"type": "datatype.string",
			"description": "Displayed under the Operational Categorization section on the interface and main forms",
			"is_required": false,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OOE035935550E7uSYAJcKjMeUCSr7rOi3",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "output",
			"name": "Incident Number",
			"type": "datatype.string",
			"description": "The number of the new incident",
			"is_required": false,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01O9WOMFYW1T54IfUTzYBsWsKbOqDvTieGR",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Status",
			"type": "datatype.string",
			"description": "Status to assign to the incident. Valid values include: New (value if no Assignee is specified), Assigned, In Progress",
			"is_required": true,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OODB7TV2XJ24PUwaE294c6bzf90jdsD6O",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Assignee",
			"type": "datatype.string",
			"description": "Full name of the user to assign the incident to (ex: Betty Smith)",
			"is_required": false,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OODERTQUYA843yLdv1IY6d11otAijgQK1",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "output",
			"name": "Request ID",
			"type": "datatype.string",
			"description": "The ID of the new incident",
			"is_required": false,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OQ0M53SCO1S6wcouhWOt7yz1xLIy9xXOa",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.secure_string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Access Token",
			"type": "datatype.secure_string",
			"description": "Access token from the \"BMC Remedy - Get Access Token\" atomic action",
			"is_required": true,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OLXA8YU0I7A5QxlOjp84Qk14W2K3r20av",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Service Type",
			"type": "datatype.string",
			"description": "Type of incident to report. Valid values include: User Service Restoration, User Service Request, Infrastructure Restoration, Infrastructure Event, Security Incient. Note: Your Remedy instance might be configured to use different values",
			"is_required": true,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OOD79DL38CP007h5sUcS5s2SmESmjpzhQ",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Detailed Description",
			"type": "datatype.string",
			"description": "Detailed description of the incident. Depending on your system, this is added to the Notes or Description field of the incident",
			"is_required": false,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OODC8QSXRQC6rPWb8D2RSPOcOxu49Qw38",
		  "object_type": "variable_workflow"
		},
		{
		  "schema_id": "datatype.string",
		  "properties": {
			"value": "",
			"scope": "input",
			"name": "Urgency",
			"type": "datatype.string",
			"description": "Urgency to address the issue. Remedy uses the values of \"Impact\" and \"Urgency\" to automatically set the priority of the incident. Valid values include:\n1 - Critical\n2 - High\n3 - Medium\n4 - Low\nNote: Your Remedy instance might be configured to use different values",
			"is_required": true,
			"is_invisible": false
		  },
		  "unique_name": "variable_workflow_01OQ9DFFKQ2UV73YSP3CjW0vCk4cVFgNLfA",
		  "object_type": "variable_workflow"
		}
	  ],
	  "properties": {
		"atomic": {
		  "atomic_group": "BMC Remedy",
		  "is_atomic": true
		},
		"delete_workflow_instance": false,
		"description": "Creates an incident in BMC Remedy.\n\nTarget: HTTP Endpoint for your Remedy instance with a path of \"/api\"\n\nAccount Key: None (uses an access token)\n\nSteps:\n[] Generate the JSON for the incident\n[] Request the incident be created\n[] Check if the request was successful:\n[]> If it was, extract the incident details and set the output variables\n[]> If it wasn't, output an error\n\nMore information about this API: https://docs.bmc.com/docs/ars2002/endpoints-in-ar-rest-api-909638176.html",
		"display_name": "BMC Remedy - Create Incident",
		"runtime_user": {
		  "target_default": true
		},
		"target": {
		  "target_type": "web-service.endpoint",
		  "specify_on_workflow_start": true
		}
	  },
	  "object_type": "definition_workflow",
	  "actions": [
		{
		  "unique_name": "definition_activity_01OODPDCZAOH46OyVjHeqg6UpY7KbwfBoRW",
		  "name": "Execute Python Script",
		  "title": "Generate incident JSON",
		  "type": "python3.script",
		  "base_type": "activity",
		  "properties": {
			"action_timeout": 180,
			"continue_on_failure": false,
			"display_name": "Generate incident JSON",
			"script": "import json\nimport sys\n\nnames = (\n    \"First_Name\", \"Last_Name\", \"Description\",\n    \"Detailed_Decription\", \"Assignee\", \"Assigned Group\", \n    \"Impact\", \"Urgency\", \"Status\", \"Reported Source\",\n    \"Service_Type\", \"Categorization Tier 1\",\n    \"Categorization Tier 2\", \"Categorization Tier 3\"\n)\n\nvalues = dict(zip(names, sys.argv[1:15]))\nvalues = {k: v for k, v in values.items() if v}\nvalues[\"z1D_Action\"] = \"CREATE\"\nincident_json = json.dumps({\"values\": values})",
			"script_arguments": [
			  "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OFVG8HP4ZM26gpRjapNbsPe3XD5hmSNhD$",
			  "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OFVGJGAKS035uCTQaideofo8FCRi2kwKt$",
			  "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OOCZV5OAINE6P9vTSpa8EQ9Ufm70q1yfF$",
			  "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OODC8QSXRQC6rPWb8D2RSPOcOxu49Qw38$",
			  "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OODERTQUYA843yLdv1IY6d11otAijgQK1$",
			  "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OODD4G709R87lniNfjRFIPbrOh0zAnPxN$",
			  "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OQ9CZEZCIQM6wlVDJRweo9VLukJHeGDX5$",
			  "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OQ9DFFKQ2UV73YSP3CjW0vCk4cVFgNLfA$",
			  "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OODB7TV2XJ24PUwaE294c6bzf90jdsD6O$",
			  "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OODACX5TEJR2BIGQJcVd38SmK7ap4EzD5$",
			  "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OOD79DL38CP007h5sUcS5s2SmESmjpzhQ$",
			  "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OOE035935550E7uSYAJcKjMeUCSr7rOi3$",
			  "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OOE08POULH95DiDs98N7hE6B7nP922nRZ$",
			  "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OOE1ULH0VTS0RMk4qDaBK9X8wZUdJ9kL1$"
			],
			"script_queries": [
			  {
				"script_query": "incident_json",
				"script_query_name": "incident_json",
				"script_query_type": "string"
			  }
			],
			"skip_execution": false
		  },
		  "object_type": "definition_activity"
		},
		{
		  "unique_name": "definition_activity_01OLUAE5IEPIC7HLQbUtBzltBos7gDPVcQn",
		  "name": "HTTP Request",
		  "title": "Create incident",
		  "type": "web-service.http_request",
		  "base_type": "activity",
		  "properties": {
			"action_timeout": 180,
			"allow_auto_redirect": true,
			"body": "$activity.definition_activity_01OODPDCZAOH46OyVjHeqg6UpY7KbwfBoRW.output.script_queries.incident_json$",
			"content_type": "application/json",
			"continue_on_error_status_code": true,
			"continue_on_failure": false,
			"custom_headers": [
			  {
				"name": "Authorization",
				"value": "AR-JWT  $workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01OLXA8YU0I7A5QxlOjp84Qk14W2K3r20av$"
			  }
			],
			"display_name": "Create incident",
			"method": "POST",
			"relative_url": "/arsys/$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.input.variable_workflow_01O9WOMFYW2WG6ctZxBOROr2l3aofhHequB$/entry/HPD:IncidentInterface_Create?fields=values(Incident+Number, Request+ID)",
			"runtime_user": {
			  "override_target_runtime_user": false,
			  "target_default": true
			},
			"skip_execution": false,
			"target": {
			  "override_workflow_target": false,
			  "override_workflow_target_group_criteria": false,
			  "use_workflow_target": true,
			  "use_workflow_target_group": false
			}
		  },
		  "object_type": "definition_activity"
		},
		{
		  "unique_name": "definition_activity_01OLUCHE1Z4QR0ZpZfaCtWJ2Dj25uSqtouD",
		  "name": "Condition Block",
		  "title": "Was the request successful?",
		  "type": "logic.if_else",
		  "base_type": "activity",
		  "properties": {
			"continue_on_failure": false,
			"display_name": "Was the request successful?",
			"skip_execution": false
		  },
		  "object_type": "definition_activity",
		  "blocks": [
			{
			  "unique_name": "definition_activity_01OOH0WQUQAJY6qVcXqbd8nI0HZsBu53gYz",
			  "name": "Condition Branch",
			  "title": "201/Created",
			  "type": "logic.condition_block",
			  "base_type": "activity",
			  "properties": {
				"condition": {
				  "left_operand": "$activity.definition_activity_01OLUAE5IEPIC7HLQbUtBzltBos7gDPVcQn.output.status_code$",
				  "operator": "eq",
				  "right_operand": 201
				},
				"continue_on_failure": false,
				"display_name": "201/Created",
				"skip_execution": false
			  },
			  "object_type": "definition_activity",
			  "actions": [
				{
				  "unique_name": "definition_activity_01OLUIWSV0PFI06jgjs2DqtOUVwV24eCr1A",
				  "name": "JSONPath Query",
				  "title": "Read incident details",
				  "type": "corejava.jsonpathquery",
				  "base_type": "activity",
				  "properties": {
					"action_timeout": 180,
					"continue_on_failure": false,
					"display_name": "Read incident details",
					"input_json": "$activity.definition_activity_01OLUAE5IEPIC7HLQbUtBzltBos7gDPVcQn.output.response_body$",
					"jsonpath_queries": [
					  {
						"jsonpath_query": "values[\"Incident Number\"]",
						"jsonpath_query_name": "Incident Number",
						"jsonpath_query_type": "string"
					  },
					  {
						"jsonpath_query": "values[\"Request ID\"]",
						"jsonpath_query_name": "Request ID",
						"jsonpath_query_type": "string"
					  }
					],
					"skip_execution": false
				  },
				  "object_type": "definition_activity"
				},
				{
				  "unique_name": "definition_activity_01OLUIS3AF12T2CuJadeCYTBmojHqq1GTxW",
				  "name": "Set Variables",
				  "title": "Set output variables",
				  "type": "core.set_multiple_variables",
				  "base_type": "activity",
				  "properties": {
					"continue_on_failure": false,
					"display_name": "Set output variables",
					"skip_execution": false,
					"variables_to_update": [
					  {
						"variable_to_update": "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.output.variable_workflow_01O9WOMFYW1T54IfUTzYBsWsKbOqDvTieGR$",
						"variable_value_new": "$activity.definition_activity_01OLUIWSV0PFI06jgjs2DqtOUVwV24eCr1A.output.jsonpath_queries.Incident Number$"
					  },
					  {
						"variable_to_update": "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.output.variable_workflow_01O9WOMFYW7CI3K1b2Hl4ESSPv1Un9x3xK5$",
						"variable_value_new": "$activity.definition_activity_01OLUAE5IEPIC7HLQbUtBzltBos7gDPVcQn.output.response_body$"
					  },
					  {
						"variable_to_update": "$workflow.definition_workflow_01O9WOMG7KXX73tlZhAC46lr51S1PVVPa9k.output.variable_workflow_01OQ0M53SCO1S6wcouhWOt7yz1xLIy9xXOa$",
						"variable_value_new": "$activity.definition_activity_01OLUIWSV0PFI06jgjs2DqtOUVwV24eCr1A.output.jsonpath_queries.Request ID$"
					  }
					]
				  },
				  "object_type": "definition_activity"
				}
			  ]
			},
			{
			  "unique_name": "definition_activity_01OLUCHT3WQM877afWmxSjuoPk5ZwhrPrBi",
			  "name": "Condition Branch",
			  "title": "Anything else",
			  "type": "logic.condition_block",
			  "base_type": "activity",
			  "properties": {
				"condition": {
				  "left_operand": "$activity.definition_activity_01OLUAE5IEPIC7HLQbUtBzltBos7gDPVcQn.output.status_code$",
				  "operator": "ne",
				  "right_operand": 201
				},
				"continue_on_failure": false,
				"display_name": "Anything else",
				"skip_execution": false
			  },
			  "object_type": "definition_activity",
			  "actions": [
				{
				  "unique_name": "definition_activity_01OLUNMLUW2KN4XXvqtEZQSd7MGGy8qhBq4",
				  "name": "Completed",
				  "title": "Failed",
				  "type": "logic.completed",
				  "base_type": "activity",
				  "properties": {
					"completion_type": "failed-completed",
					"continue_on_failure": false,
					"display_name": "Failed",
					"result_message": "Failed to create the incident\n\nStatus code: $activity.definition_activity_01OLUAE5IEPIC7HLQbUtBzltBos7gDPVcQn.output.status_code$\nResponse body: $activity.definition_activity_01OLUAE5IEPIC7HLQbUtBzltBos7gDPVcQn.output.response_body$",
					"skip_execution": false
				  },
				  "object_type": "definition_activity"
				}
			  ]
			}
		  ]
		}
	  ],
	  "categories": [
		"category_1BMfMXSnJMyt5Ihqi7rWJr5N8cf"
	  ]
	}
  }